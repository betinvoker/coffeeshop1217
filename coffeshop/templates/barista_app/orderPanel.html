{% extends 'barista_app/base.html' %}
{% load static %}
{% block title %}–ü–∞–Ω–µ–ª—å –∑–∞–∫–∞–∑–æ–≤ ‚Ä¢ CoffeeShop{% endblock %}

{% block content %}
{% csrf_token %}
  
    <!-- –§–æ—Ä–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
    <div class="card mb-4">
        <div class="card-body">
            <form method="get" class="row g-3">
                <div class="col-md-4">
                    <label for="order_id" class="form-label">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</label>
                    <input type="text" class="form-control" id="order_id" name="order_id" value="{{ current_filters.order_id }}" placeholder="–í–≤–µ–¥–∏—Ç–µ ID">
                </div>
                <div class="col-md-4">
                    <label for="status" class="form-label">–°—Ç–∞—Ç—É—Å</label>
                    <select class="form-select" id="status" name="status">
                        <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                        {% for value, label in status_choices %}
                            <option value="{{ value }}" {% if current_filters.status == value %}selected{% endif %}>
                                {{ label }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-4 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="bi bi-funnel"></i> –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                    </button>
                    {% if current_filters.order_id or current_filters.status %}
                        <a href="{% url 'barista_app:order_panel' %}" class="btn btn-outline-secondary ms-2">
                            <i class="bi bi-x-circle"></i> –°–±—Ä–æ—Å–∏—Ç—å
                        </a>
                    {% endif %}
                </div>
            </form>
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è 1: –û–∂–∏–¥–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
    {% if pending_orders %}
        <h3 class="mb-3 text-warning">
            <i class="bi bi-clock-history"></i> –û–∂–∏–¥–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
            <span class="badge bg-warning text-dark ms-2">{{ pending_orders.count }}</span>
        </h3>
        <div class="row g-3 mb-5">
            {% for order in pending_orders %}
                {% include 'barista_app/order_card.html' %}
            {% endfor %}
        </div>
    {% endif %}

    <!-- –°–µ–∫—Ü–∏—è 2: –í —Ä–∞–±–æ—Ç–µ -->
    {% if active_orders %}
        <h3 class="mb-3 text-success">
            <i class="bi bi-gear-fill"></i> –í —Ä–∞–±–æ—Ç–µ
            <span class="badge bg-success ms-2">{{ active_orders.count }}</span>
        </h3>
        <div class="row g-3 mb-5">
            {% for order in active_orders %}
                {% include 'barista_app/order_card.html' %}
            {% endfor %}
        </div>
    {% endif %}

    <!-- –°–µ–∫—Ü–∏—è 3: –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ (–≥–æ—Ç–æ–≤–æ / –æ—Ç–º–µ–Ω–µ–Ω–æ) -->
    {% if completed_orders %}
        <h3 class="mb-3 text-muted">
            <i class="bi bi-check2-circle"></i> –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ
            <span class="badge bg-secondary ms-2">{{ completed_orders.count }}</span>
        </h3>
        <div class="row g-3">
            {% for order in completed_orders %}
                {% include 'barista_app/order_card.html' %}
            {% endfor %}
        </div>
    {% endif %}

    <!-- –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç -->
    {% if not pending_orders and not active_orders and not completed_orders %}
        <div class="text-center py-5">
            <div class="display-6 text-muted mb-3">üì≠ –ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤</div>
            <p class="lead">–ó–∞–∫–∞–∑—ã –ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏.</p>
            <button class="btn btn-outline-secondary" onclick="location.reload()">–û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>
    {% endif %}
{% endblock %}